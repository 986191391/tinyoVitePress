# 普通for循环性能为什么比forEach更高

[为什么普通 for 循环的性能远远高于 forEach 的性能，请解释其中的原因](https://github.com/Advanced-Frontend/Daily-Interview-Question/issues/121)

1. 函数调用的开销

forEach 循环中，每次迭代都需要调用一个函数，即传递给 forEach 的回调函数。函数调用涉及一些开销，如函数栈的管理、上下文切换等。而普通的 for 循环没有这个额外的开销，因为所有代码都在同一个函数体内执行。

2. 闭包问题

如果在 forEach 的回调函数内部使用了外部的变量，就会创建闭包。闭包会捕获外部变量的引用，导致内存占用增加，同时也可能影响性能。而普通的 for 循环在同一个作用域内，不会涉及额外的闭包捕获。

3. 优化手段

一些 JavaScript 引擎可能对普通的 for 循环进行更好的优化，因为它们可以在编译时进行一些优化，如循环展开、内联等。而 forEach 循环的回调函数通常是在运行时动态确定的，限制了引擎的优化能力。

4. 适用性

forEach 循环在处理数组元素时，适用性较强，但对于一些特殊情况，如需要中途跳出循环、逆序遍历等，普通的 for 循环可能更为灵活和高效。